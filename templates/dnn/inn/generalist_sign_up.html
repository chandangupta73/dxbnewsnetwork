{% extends 'inn/base.html' %}
{% block body %}
{% load static %}
<!-- Contact Start -->
<div class="container-fluid bg-light py-5">
    <div class="container mt-5">
        <h2 class="text-center sgignup-head">Sign Up</h2>
        <div class="card p-5 shadow-lg" style="border-radius: 0px 0px 8px 8px;">
            <form>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label class="form-label">First Name</label>
                        <input type="text" name="" id="" class="form-control" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Last Name</label>
                        <input type="text" name="" id="" class="form-control" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" name="" id="email" class="form-control" required oninput="sendOtp()">
                        <p id="otp-message" class="otp-message">Sending OTP...</p>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">OTP Verification</label>
                        <input type="text" name="" id="" class="form-control" placeholder="Enter OTP" required>
                        <button type="button" class="btn btn-link" onclick="resendOtp()">Resend OTP</button>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Phone Number</label>
                        <input type="tel" name="" id="" class="form-control" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Alternative Phone Number</label>
                        <input type="tel" name="" id="" class="form-control">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Nationality</label>
                        <select id="nationality" name="" class="form-control select2" required>
                            <option value="">Search Nationality</option>
                            <option value="India">India</option>
                            <option value="USA">USA</option>
                            <option value="Canada">Canada</option>
                            <option value="UK">UK</option>
                            <option value="Australia">Australia</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">State</label>
                        <select name="" id="state" class="form-control select2" required>
                            <option value="">Search State</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Chandigarh">Chandigarh</option>
                            <option value="Punjab">Punjab</option>
                            <option value="UP">UP</option>
                            <option value="Goa">Goa</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">City</label>
                        <select id="city" class="form-control select2" required>
                            <option value="">Search City</option>
                            <option value="Jalandher">Jalandher</option>
                            <option value="Noida">Noida</option>
                            <option value="Chandigarh">Chandigarh</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Zip Code</label>
                        <select id="zipcode" class="form-control select2" required>
                            <option value="">Search Zip Code</option>
                            <option value="160036">160036</option>
                            <option value="160036">160036</option>
                            <option value="160036">160036</option>
                            <option value="160036">160036</option>
                            <option value="160036">160036</option>
                        </select>
                    </div>
                
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Address Line 1</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Address Line 2</label>
                        <input type="text" class="form-control">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Language</label>
                        <select id="language" class="form-control select2"  required>
                            <option value="English">English</option>
                            <option value="Hindi">Hindi</option>
                            <option value="Spanish">Spanish</option>
                            <option value="French">French</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3" id="other-language-container" style="display: none;">
                        <label class="form-label">Other Language</label>
                        <input type="text" id="other-language" class="form-control" placeholder="Enter Other Language">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Higher Education</label>
                        <select id="education" class="form-control select2" required>
                            <option value="10th">10th</option>
                            <option value="12th">12th</option>
                            <option value="Graduate">Graduate</option>
                            <option value="Post Graduate">Post Graduate</option>
                            <option value="PhD">PhD</option>
                            <option value="Diploma">Diploma</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3" id="other-education-container" style="display: none;">
                        <label class="form-label">Other Education</label>
                        <input type="text" id="other-education" class="form-control" placeholder="Enter Other Education">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Social Media Links</label>
                        <select id="social-media" class="form-control select2" >
                            <option value="Facebook">Facebook</option>
                            <option value="LinkedIn">LinkedIn</option>
                            <option value="Instagram">Instagram</option>
                            <option value="YouTube">YouTube</option>
                            <option value="Twitter">Twitter</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3" id="social-media-links" style="display: none;">
                        <label class="form-label">Social Media Links</label>
                        <input type="url" id="facebook-link" class="form-control mt-2" placeholder="Facebook Profile Link" style="display: none;">
                        <input type="url" id="linkedin-link" class="form-control mt-2" placeholder="LinkedIn Profile Link" style="display: none;">
                        <input type="url" id="instagram-link" class="form-control mt-2" placeholder="Instagram Profile Link" style="display: none;">
                        <input type="url" id="youtube-link" class="form-control mt-2" placeholder="YouTube Channel Link" style="display: none;">
                        <input type="url" id="twitter-link" class="form-control mt-2" placeholder="Twitter Profile Link" style="display: none;">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Equipment</label>
                        <select id="equipment" class="form-control select2" >
                            <option value="Laptop">Laptop</option>
                            <option value="Camera">Camera</option>
                            <option value="Microphone">Microphone</option>
                            <option value="Tripod">Tripod</option>
                        </select>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Passport Document</label>
                        <input type="file" class="form-control" accept="image/*,application/pdf">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Government Document</label>
                        <input type="file" class="form-control" accept="image/*,application/pdf">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label class="form-label">Profile Picture</label>
                        <input type="file" id="hidden-file-input" class="form-control d-none" accept="image/*">
                        <button type="button" class="btn btn-primary-pic" id="browse-button">Browse Profile Picture</button>
                    </div>
                    <div class="col-md-12 mb-3">
                        <label class="form-label">Message</label>
                        <textarea class="form-control" rows="3"></textarea>
                    </div>
                    <div class="col-md-12 mb-3">
                        <input type="checkbox" id="agree" required>
                        <label for="agree"> I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms & Conditions</a></label>
                    </div>
                    <div class="col-md-12 text-center">
                        <button type="submit" class="btn btn-primary">Send</button>
                    </div>
                </div>
               
            </form>
        </div>
    </div>

    <!-- Terms & Conditions Modal -->
<div class="modal fade" id="termsModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Terms & Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <h6>1. Introduction</h6>
                <p>By accessing this website and using our services, you agree to be bound by these Terms and Conditions.</p>
                
                <h6>2. User Responsibilities</h6>
                <p>Users must provide accurate and truthful information during the signup process. Any attempt to provide false data may result in account suspension.</p>
                
                <h6>3. Privacy Policy</h6>
                <p>We are committed to protecting your personal information. Your data will not be shared with third parties without your consent.</p>
                
                <h6>4. Service Usage</h6>
                <p>The services provided on this website must not be used for any illegal activities, including but not limited to fraud, spam, or misuse of personal data.</p>
                
                <h6>5. Modifications</h6>
                <p>We reserve the right to modify these terms at any time. Continued use of the services implies acceptance of the updated terms.</p>
            </div>
        </div>
    </div>
</div>

    <!-- Modal for Image Selection and Cropping -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="imageModalLabel">Upload & Crop Image</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Buttons for Upload & Camera -->
                <input type="file" id="file-input" accept="image/*" class="form-control">
                <button class="btn btn-success my-2" id="open-camera">Open Camera</button>
                
                <!-- Camera Preview -->
                <video id="camera-preview" autoplay class="crop-container mt-2" style="display: none; width:100%"></video>
                <button id="capture-btn" class="btn btn-danger mt-2" style="display: none;">Capture</button>

                <!-- Crop Image Area -->
                <img id="crop-image" class="crop-container" style="display: none;">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="crop-save-btn" style="display: none;">Crop & Save</button>
            </div>
        </div>
    </div>
</div>
</div>

<!-- Bootstrap JS -->
    
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <!-- Bootstrap CSS -->
    <!-- Cropper.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" rel="stylesheet">
    <script>
        const browseButton = document.getElementById('browse-button');
        const fileInput = document.getElementById('file-input');
        const hiddenFileInput = document.getElementById('hidden-file-input');
        const modal = new bootstrap.Modal(document.getElementById('imageModal'));
        const preview = document.getElementById('preview');
        const cropImage = document.getElementById('crop-image');
        const cropSaveBtn = document.getElementById('crop-save-btn');
    
        let cropper;
    
        // Open modal when Browse button is clicked
        browseButton.addEventListener('click', () => {
            modal.show();
        });
    
        // Handle file selection
        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    cropImage.src = e.target.result;
                    cropImage.style.display = "block";
                    initializeCropper();
                };
                reader.readAsDataURL(file);
            }
        });
    
        // Initialize Cropper.js
        function initializeCropper() {
            if (cropper) {
                cropper.destroy();
            }
            cropper = new Cropper(cropImage, {
                aspectRatio: 1,
                viewMode: 1,
                autoCropArea: 1
            });
            cropSaveBtn.style.display = "block";
        }
    
        // Crop & Save Image
        cropSaveBtn.addEventListener('click', () => {
            const croppedCanvas = cropper.getCroppedCanvas();
            if (croppedCanvas) {
                const croppedImageURL = croppedCanvas.toDataURL("image/png");
                preview.src = croppedImageURL;
                preview.style.display = "block";
                modal.hide();
            }
        });
    
        // Camera Integration
        const openCameraBtn = document.getElementById('open-camera');
        const cameraPreview = document.getElementById('camera-preview');
        const captureBtn = document.getElementById('capture-btn');
        let videoStream;
    
        openCameraBtn.addEventListener('click', async () => {
            try {
                videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } });
                cameraPreview.srcObject = videoStream;
                cameraPreview.style.display = "block";
                captureBtn.style.display = "block";
            } catch (error) {
                alert("Camera access denied or not supported.");
            }
        });
    
        // Capture Image from Camera
        captureBtn.addEventListener('click', () => {
            const canvas = document.createElement('canvas');
            canvas.width = cameraPreview.videoWidth;
            canvas.height = cameraPreview.videoHeight;
            canvas.getContext('2d').drawImage(cameraPreview, 0, 0, canvas.width, canvas.height);
            
            // Stop camera stream
            videoStream.getTracks().forEach(track => track.stop());
    
            // Display captured image
            cropImage.src = canvas.toDataURL('image/png');
            cameraPreview.style.display = "none";
            captureBtn.style.display = "none";
            initializeCropper();
        });
    
    </script>
    <script>
        $(document).ready(function () {
            $('.select2').select2({
                placeholder: "Select an option",
                allowClear: true
            });

            $('#language').change(function () {
                if ($(this).val().includes("Other")) {
                    $('#other-language-container').show();
                } else {
                    $('#other-language-container').hide();
                }
            });

            $('#education').change(function () {
                if ($(this).val() === "Other") {
                    $('#other-education-container').show();
                } else {
                    $('#other-education-container').hide();
                }
            });

            $('#social-media').change(function () {
                $('#social-media-links').empty(); // Clear previous inputs
                $(this).val().forEach(function (value) {
                    let formattedValue = value.toLowerCase().replace(" ", "-"); // Ensure valid ID format
                    $('#social-media-links').append(
                        `<div class="mb-2">
                            <label class="form-label">${value} Profile Link</label>
                            <input type="url" id="${formattedValue}-link" class="form-control" placeholder="Enter ${value} Profile Link">
                        </div>`
                    );
                });
            });
            
        });
        
        function sendOtp() {
            let otpMessage = document.getElementById("otp-message");
            otpMessage.style.display = "block";
            otpMessage.textContent = "Sending OTP...";

            setTimeout(() => {
                otpMessage.textContent = "OTP Sent. Check your email.";
            }, 2000);
        }

        function resendOtp() {
            let otpMessage = document.getElementById("otp-message");
            otpMessage.style.display = "block";
            otpMessage.textContent = "Resending OTP...";

            setTimeout(() => {
                otpMessage.textContent = "OTP Resent. Check your email.";
            }, 2000);
        }
    </script>
    <script>
        $(document).ready(function () {
            $('.select2').select2({
                placeholder: "Search...",
                allowClear: true
            });

            let statesByCountry = {
                "India": ["Maharashtra", "Delhi", "Karnataka", "Tamil Nadu", "Gujarat"],
                "USA": ["California", "Texas", "New York", "Florida"],
                "Canada": ["Ontario", "Quebec", "British Columbia"],
            };
            
            let citiesByState = {
                "Maharashtra": ["Mumbai", "Pune", "Nagpur"],
                "Delhi": ["New Delhi"],
                "Karnataka": ["Bangalore", "Mysore"],
                "Tamil Nadu": ["Chennai", "Coimbatore"],
                "Gujarat": ["Ahmedabad", "Surat"],
                "California": ["Los Angeles", "San Francisco"],
                "Texas": ["Houston", "Dallas"],
            };
            
            let zipCodesByCity = {
                "Mumbai": ["400001", "400002"],
                "Pune": ["411001", "411002"],
                "Bangalore": ["560001", "560002"],
                "Chennai": ["600001", "600002"],
                "New Delhi": ["110001", "110002"],
            };

            $('#nationality').change(function () {
                let country = $(this).val();
                $('#state').empty().append('<option value="">Search State</option>');
                if (statesByCountry[country]) {
                    statesByCountry[country].forEach(state => {
                        $('#state').append(`<option value="${state}">${state}</option>`);
                    });
                }
            });

            $('#state').change(function () {
                let state = $(this).val();
                $('#city').empty().append('<option value="">Search City</option>');
                if (citiesByState[state]) {
                    citiesByState[state].forEach(city => {
                        $('#city').append(`<option value="${city}">${city}</option>`);
                    });
                }
            });

            $('#city').change(function () {
                let city = $(this).val();
                $('#zipcode').empty().append('<option value="">Search Zip Code</option>');
                if (zipCodesByCity[city]) {
                    zipCodesByCity[city].forEach(zip => {
                        $('#zipcode').append(`<option value="${zip}">${zip}</option>`);
                    });
                }
            });
        });
    </script>
<style>
    .form-control { border-radius: 8px; }
    .btn-primary { border-radius: 8px; }
    .otp-message { display: none; color: green; font-size: 14px; }

    .sgignup-head{
        background: #4187c5;
        color: #fff;
        padding: 20px 0px;
        margin: 0px;
        border-radius: 8px 8px 0px 0px;
    }
    .signup-container {
    max-width: 400px;
    margin: 50px auto;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}
.form-control {
    border-radius: 10px;
}
.btn-primary-pic {
    border-radius:6px;
    width: 100%;
    padding: 10px 0px;
    float: left;
    background: #cbe5ff;
}
.password-toggle {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
}

#preview {
    display: none;
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid #ddd;
    margin-top: 10px;
}
.modal-body {
    text-align: center;
}
.crop-container {
    max-width: 100%;
    max-height: 400px;
}
#cropped-result {
    display: none;
    width: 100%;
    max-width: 200px;
    border-radius: 10px;
    margin-top: 10px;
}
.cropper-container{
    width: 100% !important;
}
</style>
{% endblock %}